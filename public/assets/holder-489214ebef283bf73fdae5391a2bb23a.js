var Holder=Holder||{};!function(t,e){function n(t,e){var n="complete",a="readystatechange",r=!1,i=r,o=!0,s=t.document,l=s.documentElement,d=s.addEventListener?"addEventListener":"attachEvent",u=s.addEventListener?"removeEventListener":"detachEvent",c=s.addEventListener?"":"on",g=function(o){(o.type!=a||s.readyState==n)&&(("load"==o.type?t:s)[u](c+o.type,g,r),!i&&(i=!0)&&e.call(t,null))},h=function(){try{l.doScroll("left")}catch(t){return setTimeout(h,50),void 0}g("poll")};if(s.readyState==n)e.call(t,"lazy");else{if(s.createEventObject&&l.doScroll){try{o=!t.frameElement}catch(f){}o&&h()}s[d](c+"DOMContentLoaded",g,r),s[d](c+a,g,r),t[d](c+"load",g,r)}}function a(t){t=t.match(/^(\W)?(.*)/);var e=document["getElement"+(t[1]?"#"==t[1]?"ById":"sByClassName":"sByTagName")](t[2]),n=[];return null!=e&&(n=e.length?e:0==e.length?e:[e]),n}function r(t,e){var n={};for(var a in t)n[a]=t[a];for(var r in e)n[r]=e[r];return n}function o(t,e,n){e=parseInt(e,10),t=parseInt(t,10);var a=Math.max(e,t),r=Math.min(e,t),i=1/12,o=Math.min(.75*r,.75*a*i);return{height:Math.round(Math.max(n.size,o))}}function s(t,e,n,a){var r=o(e.width,e.height,n),i=r.height,s=e.width*a,l=e.height*a,d=n.font?n.font:"sans-serif";h.width=s,h.height=l,t.textAlign="center",t.textBaseline="middle",t.fillStyle=n.background,t.fillRect(0,0,s,l),t.fillStyle=n.foreground,t.font="bold "+i+"px "+d;var u=n.text?n.text:Math.floor(e.width)+"x"+Math.floor(e.height),c=t.measureText(u).width;return c/s>=.75&&(i=Math.floor(.75*i*(s/c))),t.font="bold "+i*a+"px "+d,t.fillText(u,s/2,l/2,s),h.toDataURL("image/png")}function l(t,e,n,a){var i=n.dimensions,o=n.theme,l=n.text?decodeURIComponent(n.text):n.text,u=i.width+"x"+i.height;o=l?r(o,{text:l}):o,o=n.font?r(o,{font:n.font}):o,"image"==t?(e.setAttribute("data-src",a),e.setAttribute("alt",l?l:o.text?o.text+" ["+u+"]":u),(g||!n.auto)&&(e.style.width=i.width+"px",e.style.height=i.height+"px"),g?e.style.backgroundColor=o.background:e.setAttribute("src",s(f,i,o,x))):"background"==t?g||(e.style.backgroundImage="url("+s(f,i,o,x)+")",e.style.backgroundSize=i.width+"px "+i.height+"px"):"fluid"==t&&(e.setAttribute("data-src",a),e.setAttribute("alt",l?l:o.text?o.text+" ["+u+"]":u),e.style.height="%"==i.height.substr(-1)?i.height:i.height+"px",e.style.width="%"==i.width.substr(-1)?i.width:i.width+"px",("inline"==e.style.display||""==e.style.display)&&(e.style.display="block"),g?e.style.backgroundColor=o.background:(e.holderData=n,y.push(e),d(e)))}function d(t){var e;e=null==t.nodeType?y:[t];for(i in e){var n=e[i];if(n.holderData){var a=n.holderData;n.setAttribute("src",s(f,{height:n.clientHeight,width:n.clientWidth},a.theme,x))}}}function u(e,n){var a={theme:w.themes.gray},r=!1;for(sl=e.length,j=0;sl>j;j++){var i=e[j];t.flags.dimensions.match(i)?(r=!0,a.dimensions=t.flags.dimensions.output(i)):t.flags.fluid.match(i)?(r=!0,a.dimensions=t.flags.fluid.output(i),a.fluid=!0):t.flags.colors.match(i)?a.theme=t.flags.colors.output(i):n.themes[i]?a.theme=n.themes[i]:t.flags.text.match(i)?a.text=t.flags.text.output(i):t.flags.font.match(i)?a.font=t.flags.font.output(i):t.flags.auto.match(i)&&(a.auto=!0)}return r?a:!1}var c=!1,g=!1,h=document.createElement("canvas");if(document.getElementsByClassName||(document.getElementsByClassName=function(t){var e,n,a,r=document,i=[];if(r.querySelectorAll)return r.querySelectorAll("."+t);if(r.evaluate)for(n=".//*[contains(concat(' ', @class, ' '), ' "+t+" ')]",e=r.evaluate(n,r,null,0,null);a=e.iterateNext();)i.push(a);else for(e=r.getElementsByTagName("*"),n=new RegExp("(^|\\s)"+t+"(\\s|$)"),a=0;a<e.length;a++)n.test(e[a].className)&&i.push(e[a]);return i}),window.getComputedStyle||(window.getComputedStyle=function(t){return this.el=t,this.getPropertyValue=function(e){var n=/(\-([a-z]){1})/g;return"float"==e&&(e="styleFloat"),n.test(e)&&(e=e.replace(n,function(){return arguments[2].toUpperCase()})),t.currentStyle[e]?t.currentStyle[e]:null},this}),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(t){var e=this.__proto__||this.constructor.prototype;return t in this&&(!(t in e)||e[t]!==this[t])}),h.getContext)if(h.toDataURL("image/png").indexOf("data:image/png")<0)g=!0;else var f=h.getContext("2d");else g=!0;var m=1,p=1;g||(m=window.devicePixelRatio||1,p=f.webkitBackingStorePixelRatio||f.mozBackingStorePixelRatio||f.msBackingStorePixelRatio||f.oBackingStorePixelRatio||f.backingStorePixelRatio||1);var x=m/p,y=[],w={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12}},stylesheet:".holderjs-fluid {font-size:16px;font-weight:bold;text-align:center;font-family:sans-serif;margin:0}"};t.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(t){var e=this.regex.exec(t);return{width:+e[1],height:+e[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(t){var e=this.regex.exec(t);return{width:e[1],height:e[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(t){var e=this.regex.exec(t);return{size:w.themes.gray.size,foreground:"#"+e[2],background:"#"+e[1]}}},text:{regex:/text\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},font:{regex:/font\:(.*)/,output:function(t){return this.regex.exec(t)[1]}},auto:{regex:/^auto$/}};for(var v in t.flags)t.flags.hasOwnProperty(v)&&(t.flags[v].match=function(t){return t.match(this.regex)});t.add_theme=function(e,n){return null!=e&&null!=n&&(w.themes[e]=n),t},t.add_image=function(e,n){var r=a(n);if(r.length)for(var i=0,o=r.length;o>i;i++){var s=document.createElement("img");s.setAttribute("data-src",e),r[i].appendChild(s)}return t},t.run=function(e){var n=r(w,e),i=[],o=[],s=[];for("string"==typeof n.images?o=a(n.images):window.NodeList&&n.images instanceof window.NodeList?o=n.images:window.Node&&n.images instanceof window.Node&&(o=[n.images]),"string"==typeof n.bgnodes?s=a(n.bgnodes):window.NodeList&&n.elements instanceof window.NodeList?s=n.bgnodes:window.Node&&n.bgnodes instanceof window.Node&&(s=[n.bgnodes]),c=!0,f=0,h=o.length;h>f;f++)i.push(o[f]);var d=document.getElementById("holderjs-style");d||(d=document.createElement("style"),d.setAttribute("id","holderjs-style"),d.type="text/css",document.getElementsByTagName("head")[0].appendChild(d)),n.nocss||(d.styleSheet?d.styleSheet.cssText+=n.stylesheet:d.appendChild(document.createTextNode(n.stylesheet)));for(var g=new RegExp(n.domain+'/(.*?)"?\\)'),h=s.length,f=0;h>f;f++){var m=window.getComputedStyle(s[f],null).getPropertyValue("background-image"),p=m.match(g),x=s[f].getAttribute("data-background-src");if(p){var y=u(p[1].split("/"),n);y&&l("background",s[f],y,m)}else if(null!=x){var y=u(x.substr(x.lastIndexOf(n.domain)+n.domain.length+1).split("/"),n);y&&l("background",s[f],y,m)}}for(h=i.length,f=0;h>f;f++){var v=attr_data_src=m=null;try{v=i[f].getAttribute("src"),attr_datasrc=i[f].getAttribute("data-src")}catch(b){}if(null==attr_datasrc&&v&&v.indexOf(n.domain)>=0?m=v:attr_datasrc&&attr_datasrc.indexOf(n.domain)>=0&&(m=attr_datasrc),m){var y=u(m.substr(m.lastIndexOf(n.domain)+n.domain.length+1).split("/"),n);y&&(y.fluid?l("fluid",i[f],y,m):l("image",i[f],y,m))}}return t},n(e,function(){window.addEventListener?(window.addEventListener("resize",d,!1),window.addEventListener("orientationchange",d,!1)):window.attachEvent("onresize",d),c||t.run()}),"function"==typeof define&&define.amd&&define("Holder",[],function(){return t})}(Holder,window);